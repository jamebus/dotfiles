# shellcheck shell=bash # close enough for now
#
# ZSH environment (loaded first)
#

# Warning: Don't set PATH here, it'll get clobbered in macOS by /etc/zprofile

{{- if eq .role.designation "personal" }}

export PASSWORD_STORE_ENABLE_EXTENSIONS=true
{{- end }}
{{- if lookPath "git" }}

export GIT_AUTHOR_NAME={{ squote .contact.name }}
export GIT_AUTHOR_EMAIL={{ squote .contact.email }}
export GIT_COMMITTER_NAME={{ squote .contact.name }}
export GIT_COMMITTER_EMAIL={{ squote .contact.email }}
{{- end }}
{{- if lookPath "trivy" }}

export TRIVY_DB_REPOSITORY='public.ecr.aws/aquasecurity/trivy-db,aquasec/trivy-db,ghcr.io/aquasecurity/trivy-db'
export TRIVY_JAVA_DB_REPOSITORY='public.ecr.aws/aquasecurity/trivy-java-db,aquasec/trivy-java-db,ghcr.io/aquasecurity/trivy-java-db'
{{- end }}

export RIPGREP_CONFIG_PATH="${HOME}/.config/ripgrep.conf"

export FZF_DEFAULT_OPTS='
  --color=bg+:#CCD0DA,bg:#EFF1F5,spinner:#DC8A78,hl:#D20F39
  --color=fg:#4C4F69,header:#D20F39,info:#8839EF,pointer:#DC8A78
  --color=marker:#7287FD,fg+:#4C4F69,prompt:#8839EF,hl+:#D20F39
  --color=selected-bg:#BCC0CC
  --color=border:#9CA0B0,label:#4C4F69'
{{- if eq .chezmoi.os "darwin" }}

export _ZO_DATA_DIR="${HOME}/.local/share/zoxide"
  {{- if lookPath "glow" }}

export GLOW_CONFIG_HOME="${HOME}/.config/glow"
  {{- end }}
{{- end }}

# shellcheck source=/dev/null
test -r "${ZDOTDIR:-$HOME}/.zshenv.local" && \
  source "${ZDOTDIR:-$HOME}/.zshenv.local"
